.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.14
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "FULLA 1"
.TH FULLA 1 "2008-02-07" "perl v5.8.5" "HUGIN"
.SH "NAME"
fulla \- Correct lens distortion, vignetting and chromatic aberration
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBfulla\fR [options] \fIinputfile(s)\fR
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
Apply radial or flatfield vignetting correction as well as geometrical radial
distortion and transversal chromatic abberation correction.
.PP
fulla can be used to batch correct a large number of files. Radial distortion coefficients can be read from a PTLens database (only database version 4.2 is supported).
.PP
Vignetting correction is done the same way as described in the nona script file documentation.
Vignetting correction can be done based on a flatfield or a radial scaling.
.PP
Vignetting correction by flatfield division:
                        I = I / c,    c = flatfield / mean(flatfield)
.PP
Radial vignetting correction:
                        I = I / c,    c = a + b*r^2 + c*r^4 + d*r^6
.PP
The radial distortion correction is identical to the one implemented by panotools:
.PP
r_new = a*r^4 + b*r^3 + c*r^2 + d*r   [1]
.PP
Since transversal chromatic aberations (\s-1TCA\s0) leads to differently scaled objects in the
red, green and blue channel, it can be corrected by scaling the red and blue channel
so that they match the green channel. Most applications, like Photoshop or Picture Window Pro
offer \s-1TCA\s0 correction by linear scaling. This is equal to varying the d parameter in equation [1].
.PP
See http://hugin.sf.net/tutorials/tca for a method to determine these parameters.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-g\fR \fIa:b:c:d\fR" 4
.IX Item "-g a:b:c:d"
Radial distortion coefficient for all channels, (a, b, c, d)
.IP "\fB\-b\fR \fIa:b:c:d\fR" 4
.IX Item "-b a:b:c:d"
Radial distortion coefficents for blue channel, (a, b, c, d). This is
applied on top of the \fB\-g\fR distortion coefficients, use for \s-1TCA\s0 corr
.IP "\fB\-r\fR \fIa:b:c:d\fR" 4
.IX Item "-r a:b:c:d"
Radial distortion coefficents for red channel, (a, b, c, d). This is
applied on top of the \fB\-g\fR distortion coefficients, use for \s-1TCA\s0 corr
.IP "\fB\-p\fR" 4
.IX Item "-p"
Try to read radial distortion coefficients (usually supplied
using \-g) from the PTLens database. The environment variable \s-1PTLENS_PROFILE\s0
should point to the profile.txt file. Since newer version of the PTLens database
are incompatible with fulla, download the PTLens database from the hugin sourceforge
website instead: http://www.sf.net/projects/hugin
.IP "\fB\-m\fR \fICanon\fR" 4
.IX Item "-m Canon"
Camera manufacturer, for PTLens database query. \s-1EXIF\s0 data inside jpg files is read, if this
option is not given
.IP "\fB\-n\fR \fICamera\fR" 4
.IX Item "-n Camera"
Camera name, for PTLens database query. \s-1EXIF\s0 data inside jpg files is read, if this
option is not given.
.IP "\fB\-l\fR \fILens\fR" 4
.IX Item "-l Lens"
Lens name, for PTLens database query if not specified, a list of
possible lenses is displayed
.IP "\fB\-d\fR \fI50\fR" 4
.IX Item "-d 50"
Specify focal length in mm, for PTLens database query. \s-1EXIF\s0 data inside jpg files is read, if this
option is not given.
.IP "\fB\-s\fR" 4
.IX Item "-s"
Do not rescale the image to avoid black borders.
.IP "\fB\-f\fR \fIfilename\fR" 4
.IX Item "-f filename"
Vignetting correction by flatfield division
.Sp
.Vb 1
\&    I = I / c,    c = flatfield / mean(flatfield)
.Ve
.IP "\fB\-c\fR \fIa:b:c:d\fR" 4
.IX Item "-c a:b:c:d"
Radial vignetting correction by division:
.Sp
.Vb 1
\&    I = I / c,    c = a + b*r^2 + c*r^4 + d*r^6
.Ve
.IP "\fB\-i\fR \fIvalue\fR" 4
.IX Item "-i value"
Gamma of input data. used for gamma correction before and after
flatfield correction
.IP "\fB\-t\fR \fIn\fR" 4
.IX Item "-t n"
Number of threads that should be used during processing
.IP "\fB\-h\fR" 4
.IX Item "-h"
Display help summary.
.IP "\fB\-o\fR \fIname\fR" 4
.IX Item "-o name"
Set output filename. If more than one image is given, the name will be
uses as suffix (default suffix: _corr)
.IP "\fB\-e\fR \fIvalue\fR" 4
.IX Item "-e value"
Compression of the output files
.RS 4
.IP "For jpeg output: 0\-100" 4
.IX Item "For jpeg output: 0-100"
.PD 0
.IP "For tiff output: \s-1DEFLATE\s0, \s-1LZW\s0" 4
.IX Item "For tiff output: DEFLATE, LZW"
.RE
.RS 4
.RE
.IP "\fB\-v\fR" 4
.IX Item "-v"
.PD
Verbose
.SH "AUTHORS"
.IX Header "AUTHORS"
Written by Pablo d'Angelo. Also contains contributions from Douglas Wilkins, Ippei Ukai, Ed Halley, Bruno Postle, Gerry Patterson and Brent Townshend.
.PP
This manpage was written by Cyril Brulebois
<cyril.brulebois@enst\-bretagne.fr> and is licensed under the same
terms as the hugin package itself.
